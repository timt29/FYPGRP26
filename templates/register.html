<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Register - EchoPress</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}" />
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" type="image/png" />
</head>

<body>
  <!-- Header -->
  <header class="header">
    <a href="/" class="logo">EchoPress</a>
    <div class="auth-buttons">
      <a href="/login" class="signin">Sign In</a>
    </div>
  </header>

  <!-- Content -->
  <div class="container">
    <!-- Left Welcome Section -->
    <div class="welcome">
      <h1>Welcome</h1>
      <p>
        to your publishing hub - where your voice drives conversations,
        your stories inspire change, and your presence shape the narrative.
        Register now and be part of our community!
      </p>
      <div class="social-icons">
        <a href="https://facebook.com" target="_blank">
          <img src="{{ url_for('static', filename='img/facebook.png') }}" alt="Facebook" />
        </a>
        <a href="https://x.com" target="_blank">
          <img src="{{ url_for('static', filename='img/x.png') }}" alt="X" />
        </a>
        <a href="https://instagram.com" target="_blank">
          <img src="{{ url_for('static', filename='img/instagram.png') }}" alt="Instagram" />
        </a>
        <a href="https://linkedin.com" target="_blank">
          <img src="{{ url_for('static', filename='img/linkedin.png') }}" alt="LinkedIn" />
        </a>
      </div>
    </div>

    <!-- Pre-Registration Modal -->
    <div id="preRegisterModal" class="pre-modal">
      <div class="pre-modal-content">
        <h1>Welcome to EchoPress!</h1>
        <p>Choose your role and see how each one shapes the community:</p>

        <div class="role-cards">
          <div class="role-card">
            <h2>Reader</h2>
            <ul>
              <li>Browse and read articles</li>
              <li>Follow your favorite authors</li>
              <li>Join discussions</li>
            </ul>
          </div>

          <div class="role-card highlight">
            <h2>Subscriber</h2>
            <ul>
              <li>Enjoy ad-free experience</li>
              <li>Access premium stories</li>
              <li>Support content creators</li>
            </ul>
          </div>

          <div class="role-card">
            <h2>Author</h2>
            <ul>
              <li>Publish your own articles</li>
              <li>Gain followers and insights</li>
              <li>Participate in community reviews</li>
            </ul>
          </div>
        </div>

        <button onclick="closePreRegister()">Continue</button>
      </div>
    </div>

    <!-- Right Registration Form -->
    <div class="register-box">
      <h2>Register Now</h2>
      <form method="POST" action="/register">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required />

        <label for="email">Email Address</label>
        <input type="email" id="email" name="email" required />

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required />

        <div class="form-bottom">
          <div class="remember">
            <input type="checkbox" id="remember" name="remember" />
            <label for="remember">Remember Me</label>
          </div>
          
          <button type="submit">Register</button>
        </div>
      </form>
    </div>

    <!-- Privacy & User Agreement Modal -->
    <div id="agreementModal" class="modal">
      <div class="modal-content">
        <h2>Before You Continue</h2>
        <p>Please read and accept our policies to proceed:</p>

        <div class="agreement-box">
          <label>
            <input type="checkbox" id="privacyCheck" />
            I agree to the <a href="/privacy" target="_blank">Privacy Policy</a>
          </label><br>
          <label>
            <input type="checkbox" id="termsCheck" />
            I agree to the <a href="/terms" target="_blank">User Agreement</a>
          </label>
        </div>

        <div class="agreement-actions">
          <button onclick="confirmAgreement()">Confirm</button>
          <button onclick="cancelAgreement()">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div id="errorModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Duplicate Email Address</h2>
        <p>{{ error }}</p>
      </div>
    </div>
  </div>

  <script>
  function closePreRegister() {
    document.getElementById("preRegisterModal").style.display = "none";
  }

  function closeModal() {
    document.getElementById("errorModal").style.display = "none";
  }

  // Show error modal only if error exists
  {% if error %}
    document.getElementById("errorModal").style.display = "block";
  {% endif %}

  // Handle Register button click â€” show agreement modal before submitting
  const registerForm = document.querySelector("form[action='/register']");
  registerForm.addEventListener("submit", function(event) {
    event.preventDefault(); // stop default submit for now
    document.getElementById("agreementModal").style.display = "block";
  });

  // Confirm user agreement
  function confirmAgreement() {
    const privacy = document.getElementById("privacyCheck").checked;
    const terms = document.getElementById("termsCheck").checked;

    if (!privacy || !terms) {
      alert("Please agree to both the Privacy Policy and User Agreement before continuing.");
      return;
    }

    // Hide modal and submit form
    document.getElementById("agreementModal").style.display = "none";
    document.querySelector("form[action='/register']").submit();
  }

  // Cancel registration agreement
  function cancelAgreement() {
    document.getElementById("agreementModal").style.display = "none";
  }
</script>

</body>
</html>


