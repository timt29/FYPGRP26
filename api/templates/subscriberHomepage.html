<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EchoPress — Subscriber Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" type="image/png" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/subscriber.css') }}">
</head>
<body>

  <!-- Top Bar -->
  <header class="topbar">
    <div class="left">
      <a href="/" class="brand">
        <img src="{{ url_for('static', filename='img/echopresslogo.png') }}" alt="EchoPress" />
      </a>
      <!-- Search sits to the RIGHT of the logo -->
      <form class="search" action="#" method="get" role="search">
        <input type="text" placeholder="Searching for… ?" aria-label="Search" />
        <button type="submit" aria-label="Search">Search</button>
      </form>
    </div>

    <!-- User name then menu button; panel anchored to the RIGHT -->
    <div class="right">
      <span class="welcome">Welcome, {{ session.get('user', 'Subscriber') }} !</span>
      <button id="menuBtn" class="burger" aria-label="Menu"><span></span><span></span><span></span></button>
      <div id="menuPanel" class="menu-panel">
        <a href="{{ url_for('my_articles') }}">View My Articles</a>
        <a href="/bookmarks">View Bookmark</a>
        <a href="/analytics">View Analytics</a>
        <a href="/profile">Edit Profile</a>
        <a href="#" class="logout-link">Log Out</a>
      </div>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="tabs">
    <div class="tabs-inner">
      <a href="#" class="tab">For you</a>
      <a href="#" class="tab active">Trending</a>
      <a href="#" class="tab">Politics</a>
      <a href="#" class="tab">Sports</a>
      <a href="#" class="tab">Technology</a>
      <a href="#" class="tab">Economic</a>
      <a href="#" class="tab">AsiaNews</a>
      <a href="#" class="tab">WorldNews</a>
    </div>
  </nav>

  <!-- Main two-column layout -->
  <main class="page">
    <!-- LEFT: Feed -->
    <section class="feed">
      <!-- Article 1 -->
      <article class="article-card">
        <div class="text">
          <a href="{{ url_for('subscriberArticle1') }}" style="color:#000;text-decoration:none;">
            <h2>Circle Line disruption: Service between Marina Bay and Promenade stations has resumed</h2>
          </a>
          <p>A train fault on the Circle Line resulted in no train services between Marina Bay and Promenade for about 35 minutes on Monday (Sept 1) morning…</p>
        </div>
        <a href="{{ url_for('subscriberArticle1') }}" class="thumb-wrap">
          <img src="{{ url_for('static', filename='img/SMRT.webp') }}" alt="Smrt thumbnail" class="thumb" />
        </a>
      </article>

      <!-- Article 2 -->
      <article class="article-card">
        <div class="text">
          <a href="{{ url_for('subscriberArticle2') }}" style="color:#000;text-decoration:none;">
            <h3>Woman charged over possessing almost 200 etomidate-laced vapes, buying another 50</h3>
          </a>
          <p>SAY NO TO VAPE/KPOD</p>
          <p>SINGAPORE – A woman was charged over possessing 195 etomidate-laced vapes…</p>
        </div>
        <a href="{{ url_for('subscriberArticle2') }}" class="thumb-wrap">
          <img src="{{ url_for('static', filename='img/kpods.png') }}" alt="Kpods thumbnail" class="thumb" />
        </a>
      </article>

      <!-- Article 3 -->
      <article class="article-card">
        <div class="text">
          <a href="{{ url_for('subscriberArticle3') }}" style="color:#000;text-decoration:none;">
            <h3>Jail for money mule who was promised $100 a day to withdraw cash for scammers</h3>
          </a>
          <p>SINGAPORE – A financially strapped man withdrew scam proceeds in cash…</p>
        </div>
        <a href="{{ url_for('subscriberArticle3') }}" class="thumb-wrap">
          <img src="{{ url_for('static', filename='img/scam.jpg') }}" alt="Scam case" class="thumb" />
        </a>
      </article>

      <!-- Article 4 -->
      <article class="article-card">
        <div class="text">
          <a href="{{ url_for('subscriberArticle4') }}" style="color:#000;text-decoration:none;">
            <h3>Fire breaks out at Tuas industrial building; no injuries reported</h3>
          </a>
          <p>SINGAPORE – A fire broke out at an HDB block in Chai Chee Avenue on Sept 5…</p>
        </div>
        <a href="{{ url_for('subscriberArticle4') }}" class="thumb-wrap">
          <img src="{{ url_for('static', filename='img/fire.jpeg') }}" alt="Fire incident" class="thumb" />
        </a>
      </article>
    </section>

    <!-- RIGHT: Sidebar -->
    <aside class="sidebar">
      <a href="{{ url_for('create_edit_delete_article') }}" class="btn btn-primary">Create Your Story</a>
      <div class="ads">Ads</div>
    </aside>
  </main>

  <!-- Tiny JS for menu toggle (kept inline for simplicity) -->
  <script>
    (function(){
      const btn = document.getElementById('menuBtn');
      const panel = document.getElementById('menuPanel');
      if(!btn || !panel) return;
      function closeP(){ panel.style.display='none'; }
      function toggleP(){ panel.style.display = panel.style.display==='block' ? 'none' : 'block'; }
      btn.addEventListener('click', e => { e.stopPropagation(); toggleP(); });
      document.addEventListener('click', e => { if (!panel.contains(e.target) && e.target !== btn) closeP(); });
      document.addEventListener('keydown', e => { if (e.key === 'Escape') closeP(); });
    })();
  </script>

  <!-- Logout Confirmation Modal -->
<div id="logoutModal" class="modal-overlay">
  <div class="modal">
    <h2>Log Out?</h2>
    <div class="buttons">
      <button class="yes" id="confirmLogout">Yes</button>
      <button class="no" id="cancelLogout">No</button>
    </div>
  </div>
</div>

<script>
  (function() {
    const modal = document.getElementById("logoutModal");
    const confirmBtn = document.getElementById("confirmLogout");
    const cancelBtn = document.getElementById("cancelLogout");

    // intercept logout links
    document.querySelectorAll(".logout-link").forEach(link => {
      link.addEventListener("click", e => {
        e.preventDefault();
        modal.style.display = "flex";
      });
    });

    confirmBtn.addEventListener("click", () => {
      window.location.href = "{{ url_for('logout') }}";
    });

    cancelBtn.addEventListener("click", () => {
      modal.style.display = "none";
    });

    // close modal on Escape key
    document.addEventListener("keydown", e => {
      if (e.key === "Escape") modal.style.display = "none";
    });
  })();
</script>

</body>
</html>
